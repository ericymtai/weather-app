<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Loading Weather JSONP Using jQuery</title>
  <style media="screen">
    span {
      color: red;
    }
  </style>
</head>
<body>

<h1>Loading Weather JSONP</h1>
<div></div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<script>

  $(document).ready(function(){

      var target = $("div");
      var url = "http://api.openweathermap.org/data/2.5/weather" +
       "?q=Toronto,ca" +
      // "?q=Mumbai" +
      // "?q=London,uk" +
      "&appid=f540a77674a01bda518e2fee5b394280" +
      "&units=metric" +
      "&callback=?";

      $.getJSON( url, function(data) {

        var first = data;

          if ( data.rain != null) {

            // console.log(data.rain);
            $.each(data.rain, function(key, value) {
                  // console.log(key, value);
                  first = "Precipitation Volume for last " + key +"our had been " +value +"mm";
            });

          } else  {

            first = "No Rain";
          }

        var content = $("<p>City: <span>"  +
                  data.name +
                  "</span></p><p>Temperature: <span>" +
                  data.main.temp +
                  "</span>&deg;C</p><p>Description: Current weather is <span>" +
                  data.weather[0].description +
                  "</span>, Wind speed is <span>" +
                  data.wind.speed +
                  "</span>	meter&#47;sec., Humidity is <span>" +
                  data.main.humidity +
                  "</span>&#x25;, <span>" +
                  first +
                  "</span></p><img src='http://openweathermap.org/img/w/" +
                  data.weather[0].icon +
                  ".png'</img>"

                   ).appendTo(target);
      });
});

</script>
</body>
</html>
